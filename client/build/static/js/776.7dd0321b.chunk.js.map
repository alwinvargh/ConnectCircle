{"version":3,"file":"static/js/776.7dd0321b.chunk.js","mappings":"kLAKA,MAuGA,EArGoBA,KAClB,MAAOC,EAASC,IAAcC,EAAAA,EAAAA,WAAS,GACjCC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MAEXC,EAAe,IAAIC,gBAAgBH,EAASI,QAC5CC,EAAcH,EAAaI,IAAI,QAC/BC,EAAeL,EAAaI,IAAI,SAChCE,EAAQR,EAASS,MAAQT,EAASS,MAAQF,GAEzCG,EAAMC,IAAWd,EAAAA,EAAAA,UAASQ,GAA4B,KACtDO,EAAOC,IAAYhB,EAAAA,EAAAA,UAAS,IAM7BiB,GAAeC,EAAAA,EAAAA,cAAY,KAC/BnB,GAAW,GACX,MAAMoB,EAAmB,0CAAgCN,WAAcF,IACvES,EAAAA,EACGX,IAAIU,GACJE,MAAMC,IACc,MAAfA,EAAIC,SACNtB,EAAS,mBACTa,EAAQ,IACRE,EAAS,IACTjB,GAAW,GACb,IAEDyB,OAAOC,IACNT,EACES,EAAIC,SAASC,KAAKC,SAAW,mCAG/B7B,GAAW,EAAM,GACjB,GACH,CAACc,EAAMF,EAAOV,EAAUF,EAAYiB,IAavC,OAXAa,EAAAA,EAAAA,YAAU,KAEJrB,GAAeE,GACjBO,GACF,GACC,CAACT,EAAaE,EAAcO,IAEjB,8BAAVF,GACFd,EAAS,YAIT6B,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qCAAoCC,UACjDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gDAA+CC,UAC5DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oCAAmCC,SAAA,EAChDF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,0BAAyBC,SAAC,+BAEtCxB,IAAgBE,IAChBuB,EAAAA,EAAAA,MAAA,KAAGF,UAAU,OAAMC,SAAA,CAAC,qEAElBF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,YAAWC,SAAC,aAAe,4BAE3CF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,YAAWC,SAAC,YAAc,sBAK9CF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,OAAMC,UACnBF,EAAAA,EAAAA,KAAA,SACEI,KAAK,OACLC,YAAY,oBACZJ,UAAU,mDACVK,MAAOvB,EACPwB,SA3DcC,IACxBxB,EAAQwB,EAAEC,OAAOH,MAAM,MA6DhBrB,IAASe,EAAAA,EAAAA,KAAA,OAAKC,UAAU,4BAA2BC,SAAEjB,KACtDe,EAAAA,EAAAA,KAAA,UACEU,SAAU1C,EACViC,UAAU,oEACVU,QAASxB,EAAae,SAErBlC,GACCgC,EAAAA,EAAAA,KAACY,EAAAA,EAAc,CAACC,YAAa,iBAE7B,YAGJb,EAAAA,EAAAA,KAAA,UACEC,UAAU,wEACVU,QAASA,KACPxC,EAAS,UAAU,EACnB+B,SACH,iBAKD,C","sources":["pages/VerifyEmail.jsx"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router\";\r\nimport axios from \"axios\";\r\nimport LoadingSpinner from \"../components/loader/ButtonLoadingSpinner\";\r\n\r\nconst BASE_URL = process.env.REACT_APP_API_URL;\r\n\r\nconst VerifyEmail = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const searchParams = new URLSearchParams(location.search);\r\n  const codeFromUrl = searchParams.get(\"code\");\r\n  const emailFromUrl = searchParams.get(\"email\");\r\n  const email = location.state ? location.state : emailFromUrl;\r\n\r\n  const [code, setCode] = useState(codeFromUrl ? codeFromUrl : \"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleCodeChange = (e) => {\r\n    setCode(e.target.value);\r\n  };\r\n\r\n  const handleVerify = useCallback(() => {\r\n    setLoading(true);\r\n    const verificationLink = `${BASE_URL}/auth/verify?code=${code}&email=${email}`;\r\n    axios\r\n      .get(verificationLink)\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          navigate(\"/email-verified\");\r\n          setCode(\"\");\r\n          setError(\"\");\r\n          setLoading(false);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setError(\r\n          err.response.data.message || \"Invalid code, please try again.\"\r\n        );\r\n\r\n        setLoading(false);\r\n      });\r\n  }, [code, email, navigate, setLoading, setError]);\r\n\r\n  useEffect(() => {\r\n    // Automatically trigger handleVerify if both code and email are present in the URL\r\n    if (codeFromUrl && emailFromUrl) {\r\n      handleVerify();\r\n    }\r\n  }, [codeFromUrl, emailFromUrl, handleVerify]);\r\n\r\n  if (error === \"Email is already verified\") {\r\n    navigate(\"/signin\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-10 overflow-y-auto\">\r\n      <div className=\"flex min-h-screen items-center justify-center\">\r\n        <div className=\"rounded-md bg-white p-6 shadow-md\">\r\n          <h2 className=\"mb-4 text-2xl font-bold\">Verify your email address</h2>\r\n\r\n          {!codeFromUrl && !emailFromUrl && (\r\n            <p className=\"mb-4\">\r\n              A verification code was sent to your email address. Please either\r\n              <span className=\"font-bold\"> follow </span>\r\n              the link in the email or\r\n              <span className=\"font-bold\"> enter </span>\r\n              the code below.\r\n            </p>\r\n          )}\r\n\r\n          <div className=\"mb-4\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Verification code\"\r\n              className=\"w-full rounded-lg border-2 border-purple-300 p-2\"\r\n              value={code}\r\n              onChange={handleCodeChange}\r\n            />\r\n          </div>\r\n          {error && <div className=\"mb-4 text-sm text-red-500\">{error}</div>}\r\n          <button\r\n            disabled={loading}\r\n            className=\"rounded-lg bg-purple-500 px-4 py-2 text-white hover:bg-purple-600\"\r\n            onClick={handleVerify}\r\n          >\r\n            {loading ? (\r\n              <LoadingSpinner loadingText={\"Verifying...\"} />\r\n            ) : (\r\n              \"Verify\"\r\n            )}\r\n          </button>\r\n          <button\r\n            className=\"ml-4 rounded-lg bg-gray-300 px-4 py-2 text-gray-800 hover:bg-gray-400\"\r\n            onClick={() => {\r\n              navigate(\"/signup\");\r\n            }}\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VerifyEmail;\r\n"],"names":["VerifyEmail","loading","setLoading","useState","navigate","useNavigate","location","useLocation","searchParams","URLSearchParams","search","codeFromUrl","get","emailFromUrl","email","state","code","setCode","error","setError","handleVerify","useCallback","verificationLink","axios","then","res","status","catch","err","response","data","message","useEffect","_jsx","className","children","_jsxs","type","placeholder","value","onChange","e","target","disabled","onClick","LoadingSpinner","loadingText"],"sourceRoot":""}